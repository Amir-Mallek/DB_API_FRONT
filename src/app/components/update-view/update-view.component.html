<form [formGroup]="updateForm" (ngSubmit)="onSubmit()">
  <h1 class="p-3">
    <span>Update </span>
    <a routerLink="/{{ schema }}">{{ schema }}</a>
     .
    <a routerLink="/{{ schema }}/{{ table }}"> {{ table }}</a>
    <span> Set</span>
  </h1>
  <div class="container text-center mt-4">
    <div class="row head m-2 rounded">
      <div class="col-1">Include</div>
      <div class="col">Column</div>
      <div class="col">Type</div>
      <div class="col">Nullable</div>
      <div class="col">Value</div>
    </div>
    @for (column of columns; track column.name) {
      <div
        class="row input-row rounded align-items-center"
        [class.disabled]="updateForm.get(column.name+'-checkbox')?.value === false"
      >
        <div class="col-1">
          <input
            class="form-check-input"
            type="checkbox"
            formControlName="{{ column.name+'-checkbox' }}"
          >
        </div>
        <div class="col">
          {{ column.name }}
          @if (column.isKey) {
            <span class="badge bg-info">PK</span>
          }
        </div>
        <div class="col">
          {{ column.type }}
          @if (column.isAutoGenerated) {
            <span class="badge bg-info">Auto Increment</span>
          }
        </div>
        <div class="col">{{ (column.nullable ? 'YES' : 'NO') }}</div>
        <div class="col">
          @if (updateForm.get(column.name+'-checkbox')?.value) {
            <input
              class="form-control"
              type="{{ column.type | inputType }}"
              formControlName="{{ column.name }}"
            >
          } @else {
            Not Included
          }
        </div>
      </div>
    }
  </div>
  <div class="row p-3">
    <h1>Where</h1>
    <app-operand
      [columns]="columns"
      type="cond"
      [nb]="1"
      [operand]="where"
    ></app-operand>
  </div>
  <div class="row m-5">
    <div class="col-3">
      <button
        class="btn btn-info"
        type="submit"
      >
        Update
      </button>
    </div>
    <div class="col-5">
      <app-query-result [success]="queryStatus" [message]="queryMessage"></app-query-result>
    </div>
  </div>
</form>
